<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Recorder</title>
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link rel="stylesheet" href="css/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
  </head>
  <body>
    <div id="megaWrapper">

      <div id="statusWrapper" class="border" data-bind="visible: statusVm.statusVisible, with: statusVm">
        <span data-bind="text:message"></span> <span class="handje" data-bind="click:message.bind(undefined,'')"><i class="fa fa-times" aria-hidden="true"></i></span>
      </div>

      <div id="pageWrapper" data-bind="with:pageVm">

        <div id="errorPage" class="page" data-bind="css: { 'animate-out': !errorVisible(), 'animate-in': errorVisible(), initial: false }">
          <p>Er lijkt een probleem te zijn met de webapp. Jammer! Het opnemen van de microfoon via de browser werkt momenteel alleen in Chrome en Firefox. Internet Explorer, Edge, en Safari ondersteunen dit jammer genoeg nog niet.</p>
          <p>Als eerste remedie kan je dus proberen om de Chrome browser te proberen. Als je deze nog niet hebt, kan je hem downloaden op chrome.download. Probeer het dan nog eens.</p>
          <p>Als tweede remedie kan je een audio-bestand opnemen op je computer zelf (voor windows start je hiervoor de geluidsrecorder op, voor mac doe je dit via quicktime), en upload je het bestand hieronder:
            <input type="file" value="upload" id="fileButton" />
          </p>
        </div>

        <div id="page1" class="page" data-bind="css: { 'animate-out': !loginVisible(), 'animate-in': loginVisible, initial: false }">
          <img src="img/clover.png" class="clover"/>
          <div id="loginWrapper" data-bind="with:$parent.loginVm">
            <p>Welkom! Vul hieronder de code in die je ontvangen hebt. Klik daarna op Log in.</p>
            <input type="text" data-bind="value:code" />
            <div class="actionButton">
              <div data-bind="click:login">Log in <i class="fa fa-chevron-right" aria-hidden="true"></i></div>
            </div>
          </div>
        </div>

        <div id="page2" class="page" data-bind="css: { 'animate-out': !recordVisible(), 'animate-in': recordVisible, 'initial': initial }">
          <img src="img/clover.png" class="clover"/>
          <div id="userWrapper" data-bind="with:$parent.userVm">
            <p>Welkom <span data-bind="text:name"></span>!</p>
            <p>Klik hieronder op record om te beginnen opnemen. Klik op stop als je klaar bent. Daarna verschijnt een speler waarin je de opname kunt herbeluisteren. Als je deze goed vindt, klik je op "klaar!". Als je opnieuw wil opnemen, kan je nog eens op record klikken.</p>
            <p>Veel plezier!</p>
          </div>

          <div id="recordWrapper" data-bind="with:$parent.recordVm">
              <div id="buttons">
                <div class="record">Record</div>
                <div class="stop">Stop</div>
              </div>
            
              <div class="clip" data-bind="visible:playerVisible">
                <audio controls class="audio"></audio>
              </div>
          </div>

          <div class="actionButton">
            <div data-bind="click:$parent.userVm.isReady.bind(null,true)">Klaar <i class="fa fa-chevron-right" aria-hidden="true"></i></div>
          </div>
        </div>

        <div id="page3" class="page" data-bind="css: { 'animate-out': !finalVisible(), 'animate-in': finalVisible, 'initial': initial }">
          <img src="img/clover.png" class="clover"/>
          <div>
            Klaar!
          </div>
        </div>

      </div>

    </div>

    <!-- Below is your custom application script -->
    <script src="https://www.gstatic.com/firebasejs/3.7.0/firebase.js"></script>
    <script src="lib/knockout-3.4.2.js"></script>
    <script src="js/fbClient.js"></script>
    <script src="js/recorder.js"></script>
    <script src="js/index.js"></script>

  </body>
</html>
